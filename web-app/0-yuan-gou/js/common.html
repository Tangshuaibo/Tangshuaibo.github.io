// 设置头部按钮
function setBtnHeader () {
    $('#header-back').on('click', function () {
        window.history.go(-1);
    });
    $('#header-close').on('click', function () {
        // window.location.href = '';
    });
    $('#header-service').on('click', function () {
        window.location.href = './service.html';
    });
}

// 设置底部导航栏
function setTabBarFooter() {
    $('.footer.tab-bar .tab-bar-item').on('click', function () {
        switch ($(this).attr('id')) {
            case 'footer-item-home': {
                window.location.href = './home.html';
                break;
            }
            case 'footer-item-service': {
                window.location.href = './service.html';
                break;
            }
            case 'footer-item-order': {
                window.location.href = './order.html'
                break;
            }
            case 'footer-item-center': {
                window.location.href = './center.html'
                break;
            }
        }
    });
}

// 设置头底内边距
function setAppPadding () {
    if ($('.header').length === 0) {
        $('#app').css('padding-top', '0');
    }
    if ($('.footer').length === 0) {
        $('#app').css('padding-bottom', '0');
    }
}

// 设置导航选项
function setTabBar () {
    $('.tab-bar-item').on('click', function () {
        if (!$(this).hasClass('active')) {
            $(this).addClass('active');
            $(this).siblings('.tab-bar-item.active').removeClass('active');
        }
    });
}

// 设置tab选项卡
function setTabSelector () {
    $('.tab-selector-item').on('click', function () {
        if (!$(this).hasClass('active')) {
            $(this).addClass('active');
            $(this).siblings('.tab-selector-item.active').removeClass('active');
            var tempTabId = $(this).data('tab-id');
            if (tempTabId) {
                var tempTabItem = $('#' + tempTabId);
                tempTabItem.addClass('active');
                tempTabItem.siblings('.tab-item').removeClass('active');
            }
        }
    });
}

// 设置分类选择器
function setClassSelector () {
    $('.class-selector-item:not(.menu)').on('click', function () {
        if (!$(this).hasClass('active')) {
            $(this).addClass('active');
            $(this).siblings('.class-selector-item.active').removeClass('active');
        } else {
            $(this).removeClass('active');
        }
    });
    $('.class-selector-item.sort').on('click', function () {
        var thisIcon = $(this).find('.fa');
        switch (thisIcon.attr('class')) {
            case 'fa fa-sort': {
                thisIcon.removeClass('fa-sort').addClass('fa-sort-asc');
                break;
            }
            case 'fa fa-sort-asc': {
                thisIcon.removeClass('fa-sort-asc').addClass('fa-sort-desc');
                break;
            }
            case 'fa fa-sort-desc': {
                thisIcon.removeClass('fa-sort-desc').addClass('fa-sort');
                break;
            }
        }
    });
}

// 设置可折叠面板
function setPanelCollapse () {
    $('.panel-collapse').each(function () {
        var thisPanel = $(this);
        var thisPanelHeader = thisPanel.find('.panel-collapse-header');
        var thisPanelArrow = thisPanelHeader.find('.arrow');
        var thisPanelBody = thisPanel.find('.panel-collapse-body');
        if (thisPanel.hasClass('active')) {
            thisPanelArrow.removeClass('fa-chevron-down').addClass('fa-chevron-up');
            thisPanelBody.show();
        }
        thisPanelHeader.on('click', function () {
            if (thisPanel.hasClass('active')) {
                thisPanel.removeClass('active');
                thisPanelArrow.removeClass('fa-chevron-up').addClass('fa-chevron-down');
                thisPanelBody.slideUp();
            } else {
                thisPanel.addClass('active');
                thisPanelArrow.removeClass('fa-chevron-down').addClass('fa-chevron-up');
                thisPanelBody.slideDown();
            }
        });
    });
}

// 设置图片选择器
function setImgSelector() {
    $('.img-selector-list').on('click', '.img-selector-item', function () {
        if (!$(this).hasClass('active')) {
            $(this).addClass('active');
            $(this).siblings('.img-selector-item.active').removeClass('active');
        } else {
            $(this).removeClass('active');
        }
    });
}

// 页面加载完成后执行
$(function () {
    setTabBar();
    setBtnHeader();
    setAppPadding();
    setTabSelector();
    setImgSelector();
    setTabBarFooter();
    setPanelCollapse();
    setClassSelector();
});