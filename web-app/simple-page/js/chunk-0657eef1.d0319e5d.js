(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0657eef1"],{"077c":function(e,t,r){"use strict";var a=r("6f8c"),n=r.n(a);n.a},5319:function(e,t,r){"use strict";var a=r("d784"),n=r("825a"),s=r("7b0b"),o=r("50c4"),i=r("a691"),u=r("1d80"),c=r("8aa5"),l=r("14c3"),d=Math.max,f=Math.min,m=Math.floor,g=/\$([$&'`]|\d\d?|<[^>]*>)/g,p=/\$([$&'`]|\d\d?)/g,h=function(e){return void 0===e?e:String(e)};a("replace",2,(function(e,t,r,a){var v=a.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,b=a.REPLACE_KEEPS_$0,w=v?"$":"$0";return[function(r,a){var n=u(this),s=void 0==r?void 0:r[e];return void 0!==s?s.call(r,n,a):t.call(String(n),r,a)},function(e,a){if(!v&&b||"string"===typeof a&&-1===a.indexOf(w)){var s=r(t,e,this,a);if(s.done)return s.value}var u=n(e),m=String(this),g="function"===typeof a;g||(a=String(a));var p=u.global;if(p){var y=u.unicode;u.lastIndex=0}var k=[];while(1){var F=l(u,m);if(null===F)break;if(k.push(F),!p)break;var $=String(F[0]);""===$&&(u.lastIndex=c(m,o(u.lastIndex),y))}for(var R="",S=0,V=0;V<k.length;V++){F=k[V];for(var N=String(F[0]),x=d(f(i(F.index),m.length),0),j=[],E=1;E<F.length;E++)j.push(h(F[E]));var A=F.groups;if(g){var U=[N].concat(j,x,m);void 0!==A&&U.push(A);var T=String(a.apply(void 0,U))}else T=P(N,m,x,j,A,a);x>=S&&(R+=m.slice(S,x)+T,S=x+N.length)}return R+m.slice(S)}];function P(e,r,a,n,o,i){var u=a+e.length,c=n.length,l=p;return void 0!==o&&(o=s(o),l=g),t.call(i,l,(function(t,s){var i;switch(s.charAt(0)){case"$":return"$";case"&":return e;case"`":return r.slice(0,a);case"'":return r.slice(u);case"<":i=o[s.slice(1,-1)];break;default:var l=+s;if(0===l)return t;if(l>c){var d=m(l/10);return 0===d?t:d<=c?void 0===n[d-1]?s.charAt(1):n[d-1]+s.charAt(1):t}i=n[l-1]}return void 0===i?"":i}))}}))},"6f8c":function(e,t,r){},"9ab4":function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var a=r("3452"),n=r.n(a);function s(e){"string"!==typeof e&&(e=JSON.stringify(e));var t=n.a.SHA256(e),r=n.a.enc.Base64.stringify(t);return r}},db7c:function(e,t,r){e.exports=r.p+"img/default_avatar.db6e1d54.png"},f944:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"page-registration"}},[a("Icon",{attrs:{id:"page-registration-btn-back",name:"arrow-left"},on:{click:e.jumpToPreviousPage}}),a("VanImage",{attrs:{id:"page-registration-icon",round:"",width:"144px",height:"144px",fit:"cover",src:r("db7c")},on:{click:e.jumpToPageHome}}),a("Form",{ref:"pageRegistrationForm",attrs:{id:"page-registration-form","show-error":!1},on:{submit:function(t){return e.doSubmitFormValues(t,e.urls.getRSAPubKey,e.urls.postRegiVal)}}},[a("Field",{ref:"registrationFieldUserName",attrs:{name:"userName",label:"用户名",placeholder:"请输入6至20个字符（字母或数字）",rules:e.rulesUserName},model:{value:e.formValues.userName,callback:function(t){e.$set(e.formValues,"userName",t)},expression:"formValues.userName"}}),a("Field",{ref:"registrationFieldPassword",attrs:{name:"password",type:"password",label:"密码",placeholder:"请输入8至20个字符（字母或数字）",rules:e.rulesPassword},model:{value:e.formValues.password,callback:function(t){e.$set(e.formValues,"password",t)},expression:"formValues.password"}}),a("Field",{ref:"registrationFieldConfirmation",attrs:{name:"confirmation",type:"password",label:"密码确认",placeholder:"请再次输入密码",rules:e.rulesConfirmation},model:{value:e.formValues.confirmation,callback:function(t){e.$set(e.formValues,"confirmation",t)},expression:"formValues.confirmation"}}),a("div",{attrs:{id:"page-registration-btns"}},[a("Button",{attrs:{id:"page-registration-btn-submit",round:"",block:"",type:"info","native-type":"submit"}},[e._v(" 注册 ")]),a("Button",{attrs:{id:"page-registration-btn-login",round:"",block:"",type:"default","native-type":"button"},on:{click:e.jumpToPageLogin}},[e._v(" 已有账号？点我登录 ")])],1)],1)],1)},n=[],s=(r("caad"),r("d3b7"),r("ac1f"),r("2532"),r("5319"),r("96cf"),r("1da1")),o=(r("9a83"),r("f564")),i=(r("4056"),r("44bf")),u=(r("c3a6"),r("ad06")),c=(r("38d5"),r("772a")),l=(r("be7f"),r("565f")),d=(r("66b9"),r("b650")),f=r("9ab4"),m=r("a0d1"),g=r("3853"),p={name:"PageRegistration",components:{Button:d["a"],Field:l["a"],Form:c["a"],Icon:u["a"],VanImage:i["a"]},data:function(){return{showBtnBack:!0,urls:{getRSAPubKey:g["c"],postRegiVal:g["o"]},routePath:{pathFrom:"",pathTo:""},formValues:{userName:"",password:"",confirmation:""},rulesUserName:[{required:!0,message:"请填写用户名"},{message:"",validator:this.checkUserNameFormat}],rulesPassword:[{required:!0,message:"请填写密码"},{message:"",validator:this.checkPasswordFormat}],rulesConfirmation:[{required:!0,message:"请再次填写密码"},{message:"两次填写的密码不一致",validator:this.confirmPassword}]}},beforeRouteEnter:function(e,t,r){r((function(r){r.routePath={pathFrom:t.path,pathTo:e.path}}))},beforeRouteLeave:function(e,t,r){this.$refs.pageRegistrationForm.resetValidation(),r()},methods:{checkUserNameFormat:function(e,t){var r=/^[a-z0-9]+$/i,a=!1;return r.test(e)?e.length<6?t.message="字符不应少于6个":e.length>20?t.message="字符不应多于20个":a=!0:t.message="不应包含除字母和数字以外的字符",a},checkPasswordFormat:function(e,t){var r=/^[a-z0-9]+$/i,a=!1;return r.test(e)?e.length<8?t.message="字符不应少于8个":e.length>20?t.message="字符不应多于20个":a=!0:t.message="不应包含除字母和数字以外的字符",a},confirmPassword:function(e){return this.formValues.password===e},notifyBadConnection:function(){Object(o["a"])({type:"danger",message:"连接服务器失败"})},getRSAPubKey:function(e){return Object(m["d"])().get(e).then((function(e){return e.data.payload.key})).catch((function(e){return Promise.reject(e)}))},postRSAEncryptedMsg:function(e,t,r){var a=this;return Object(m["c"])(t).post(e,r).then((function(e){return e})).catch((function(e){var t,r,n=null===e||void 0===e||null===(t=e.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message;return(null===n||void 0===n?void 0:n.includes("key: 'RequestUserLogin.userName'"))&&(a.$refs.registrationFieldUserName.validateMessage="用户名格式不正确"),(null===n||void 0===n?void 0:n.includes("key: 'RequestUserLogin.password'"))&&(a.$refs.registrationFieldPassword.validateMessage="密码格式不正确"),"user already exists"===n&&(a.$refs.registrationFieldUserName.validateMessage="用户名已存在"),Promise.reject(e)}))},submitFormValues:function(e,t,r){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.getRSAPubKey(t);case 2:return s=n.sent,o={userName:e.userName,password:Object(f["a"])(e.password)},n.next=6,a.postRSAEncryptedMsg(r,s,o);case 6:return i=n.sent,n.abrupt("return",i);case 8:case"end":return n.stop()}}),n)})))()},doSubmitFormValues:function(e,t,r){var a=this;if(this.$store.getters.isConnected)return this.submitFormValues(e,t,r).then((function(e){Object(o["a"])({type:"success",message:"注册成功"})})).catch((function(){a.$store.getters.isConnected?Object(o["a"])({type:"danger",message:"注册失败"}):a.notifyBadConnection()}));this.notifyBadConnection()},jumpToPreviousPage:function(){this.$router.back()},jumpToPageHome:function(){this.$router.push("/")},jumpToPageLogin:function(){this.$router.replace("/login")}}},h=p,v=(r("077c"),r("2877")),b=Object(v["a"])(h,a,n,!1,null,"974ac60e",null);t["default"]=b.exports}}]);
//# sourceMappingURL=chunk-0657eef1.d0319e5d.js.map