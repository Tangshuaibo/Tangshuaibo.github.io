{"version":3,"sources":["webpack:///./node_modules/core-js/modules/web.dom-collections.for-each.js","webpack:///./node_modules/core-js/internals/array-for-each.js","webpack:///./node_modules/vant/es/dialog/index.js","webpack:///./node_modules/vant/es/dialog/Dialog.js","webpack:///./src/views/PageSettings.vue?1832","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:///./node_modules/vant/es/nav-bar/index.js","webpack:///./node_modules/vant/es/cell-group/index.js","webpack:///./src/components/PageSettingsPassword.vue?1f1f","webpack:///src/components/PageSettingsPassword.vue","webpack:///./src/components/PageSettingsPassword.vue?530f","webpack:///./src/components/PageSettingsPassword.vue?5acb","webpack:///./src/components/PageSettingsNickname.vue?6df7","webpack:///src/components/PageSettingsNickname.vue","webpack:///./src/components/PageSettingsNickname.vue?10ca","webpack:///./src/components/PageSettingsNickname.vue?fd38","webpack:///src/views/PageSettings.vue","webpack:///./src/views/PageSettings.vue?a277","webpack:///./src/views/PageSettings.vue?95b7","webpack:///./node_modules/core-js/modules/es.array.for-each.js","webpack:///./src/components/PageSettingsPassword.vue?91ba","webpack:///./node_modules/vant/es/popup/style/index.js","webpack:///./src/utils/hashCalculator.js","webpack:///./node_modules/core-js/internals/array-method-is-strict.js","webpack:///./src/views/PageSettings.vue?c644","webpack:///./src/components/PageSettingsNickname.vue?b3df","webpack:///./src/assets/others/default_avatar.png","webpack:///./node_modules/vant/es/dialog/style/index.js"],"names":["global","DOMIterables","forEach","createNonEnumerableProperty","COLLECTION_NAME","Collection","CollectionPrototype","prototype","error","$forEach","arrayMethodIsStrict","arrayMethodUsesToLength","STRICT_METHOD","USES_TO_LENGTH","module","exports","callbackfn","this","arguments","length","undefined","instance","_createNamespace","create","createComponent","bem","t","mixins","props","title","String","width","Number","message","className","callback","Function","beforeClose","messageAlign","cancelButtonText","cancelButtonColor","confirmButtonText","confirmButtonColor","showCancelButton","Boolean","transition","type","default","showConfirmButton","overlay","closeOnClickOverlay","data","loading","confirm","cancel","methods","onClickOverlay","handleAction","action","_this","$emit","value","state","onClose","close","onOpened","onClosed","genButtons","_ref","_this2","h","$createElement","multiple","buttons","color","render","_bem","shouldRender","messageSlot","slots","Title","isolated","Content","name","isInDocument","element","document","body","contains","initInstance","$destroy","extend","el","createElement","propsData","lazyRender","$on","options","Promise","resolve","reject","$el","currentOptions","defaultOptions","lockScroll","overlayClass","overlayStyle","getContainer","closeOnPopstate","alert","setDefaultOptions","resetDefaultOptions","install","use","Component","$dialog","_vm","_h","_c","_self","attrs","on","jumpToPreviousPage","_v","_s","appUserInfo","nickName","uid","userName","createdAt","togglePopupNickname","togglePopupPassword","uploadUserData","downloadUserData","deleteUserAccount","requestToLogout","showPopupNickname","$event","showPopupPassword","staticRenderFns","_arrayWithoutHoles","arr","Array","isArray","arrayLikeToArray","_iterableToArray","iter","Symbol","iterator","Object","from","_nonIterableSpread","TypeError","_toConsumableArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","fixed","zIndex","leftText","rightText","leftArrow","placeholder","border","height","mounted","$refs","navBar","getBoundingClientRect","genLeft","leftSlot","genRight","rightSlot","genNavBar","onClickLeft","onClickRight","event","CellGroup","ctx","Group","onPopupOpen","onPopupClose","model","$$v","showPopup","expression","staticClass","ref","doSubmitFormValues","rulesOldPassword","formValues","$set","rulesNewPassword","rulesConfirmation","components","Button","Field","Form","Popup","show","patchingPassword","urls","getRSAPubKey","patchPassword","oldPassword","newPassword","confirmation","computed","get","set","isConnected","$store","getters","isLoggedIn","checkPasswordFormat","pattern","test","rule","checkPassed","distinguishPassword","confirmPassword","assign","pageSettingsPasswordFrom","resetValidation","notifyBadConnection","patchRSAEncryptedMsg","submitFormValues","values","component","rulesOldNickname","rulesNewNickname","patchingNickname","patchNickname","oldNickname","newNickname","checkNicknameFormat","distinguishNickname","pageSettingsNicknameForm","patchAESEncryptedMsg","Cell","NavBar","VanImage","PageSettingsNickname","PageSettingsPassword","isDeletingUserAccount","isLoggingOut","isUploadingUserData","isDownloadingUserData","urlDeleteAccount","urlGetUserLogout","urlPostUserBookmark","urlPostUserBackground","urlGetUserBookmark","urlGetUserBackground","watch","$router","replace","notifyLoginAgain","back","notifyRequestFrequencyHigh","clearLocalDate","dispatch","postUserBookmarks","formData","append","encDetail","iconFiles","item","postUserBackground","titleColor","background","bmTitleColor","imageName","bgImgName","$","target","proto","forced","SHA256Calculator","JSON","stringify","hashDigest","CryptoJS","SHA256","hashDigestBase64","enc","Base64","fails","METHOD_NAME","argument","method","call"],"mappings":"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","file":"js/chunk-1306eb28.58e6071d.js","sourcesContent":["var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar forEach = require('../internals/array-for-each');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n}\n","'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('forEach');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\nmodule.exports = (!STRICT_METHOD || !USES_TO_LENGTH) ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n} : [].forEach;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport Vue from 'vue';\nimport VanDialog from './Dialog';\nimport { isServer } from '../utils';\nvar instance;\n\nfunction isInDocument(element) {\n  return document.body.contains(element);\n}\n\nfunction initInstance() {\n  if (instance) {\n    instance.$destroy();\n  }\n\n  instance = new (Vue.extend(VanDialog))({\n    el: document.createElement('div'),\n    // avoid missing animation when first rendered\n    propsData: {\n      lazyRender: false\n    }\n  });\n  instance.$on('input', function (value) {\n    instance.value = value;\n  });\n}\n\nfunction Dialog(options) {\n  /* istanbul ignore if */\n  if (isServer) {\n    return Promise.resolve();\n  }\n\n  return new Promise(function (resolve, reject) {\n    if (!instance || !isInDocument(instance.$el)) {\n      initInstance();\n    }\n\n    _extends(instance, Dialog.currentOptions, options, {\n      resolve: resolve,\n      reject: reject\n    });\n  });\n}\n\nDialog.defaultOptions = {\n  value: true,\n  title: '',\n  width: '',\n  message: '',\n  overlay: true,\n  className: '',\n  lockScroll: true,\n  transition: 'van-dialog-bounce',\n  beforeClose: null,\n  overlayClass: '',\n  overlayStyle: null,\n  messageAlign: '',\n  getContainer: 'body',\n  cancelButtonText: '',\n  cancelButtonColor: null,\n  confirmButtonText: '',\n  confirmButtonColor: null,\n  showConfirmButton: true,\n  showCancelButton: false,\n  closeOnPopstate: false,\n  closeOnClickOverlay: false,\n  callback: function callback(action) {\n    instance[action === 'confirm' ? 'resolve' : 'reject'](action);\n  }\n};\nDialog.alert = Dialog;\n\nDialog.confirm = function (options) {\n  return Dialog(_extends({\n    showCancelButton: true\n  }, options));\n};\n\nDialog.close = function () {\n  if (instance) {\n    instance.value = false;\n  }\n};\n\nDialog.setDefaultOptions = function (options) {\n  _extends(Dialog.currentOptions, options);\n};\n\nDialog.resetDefaultOptions = function () {\n  Dialog.currentOptions = _extends({}, Dialog.defaultOptions);\n};\n\nDialog.resetDefaultOptions();\n\nDialog.install = function () {\n  Vue.use(VanDialog);\n};\n\nDialog.Component = VanDialog;\nVue.prototype.$dialog = Dialog;\nexport default Dialog;","import { createNamespace, addUnit } from '../utils';\nimport { BORDER_TOP, BORDER_LEFT } from '../utils/constant';\nimport { PopupMixin } from '../mixins/popup';\nimport Button from '../button';\n\nvar _createNamespace = createNamespace('dialog'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1],\n    t = _createNamespace[2];\n\nexport default createComponent({\n  mixins: [PopupMixin()],\n  props: {\n    title: String,\n    width: [Number, String],\n    message: String,\n    className: null,\n    callback: Function,\n    beforeClose: Function,\n    messageAlign: String,\n    cancelButtonText: String,\n    cancelButtonColor: String,\n    confirmButtonText: String,\n    confirmButtonColor: String,\n    showCancelButton: Boolean,\n    transition: {\n      type: String,\n      default: 'van-dialog-bounce'\n    },\n    showConfirmButton: {\n      type: Boolean,\n      default: true\n    },\n    overlay: {\n      type: Boolean,\n      default: true\n    },\n    closeOnClickOverlay: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      loading: {\n        confirm: false,\n        cancel: false\n      }\n    };\n  },\n  methods: {\n    onClickOverlay: function onClickOverlay() {\n      this.handleAction('overlay');\n    },\n    handleAction: function handleAction(action) {\n      var _this = this;\n\n      this.$emit(action); // show not trigger close event when hidden\n\n      if (!this.value) {\n        return;\n      }\n\n      if (this.beforeClose) {\n        this.loading[action] = true;\n        this.beforeClose(action, function (state) {\n          if (state !== false && _this.loading[action]) {\n            _this.onClose(action);\n          }\n\n          _this.loading.confirm = false;\n          _this.loading.cancel = false;\n        });\n      } else {\n        this.onClose(action);\n      }\n    },\n    onClose: function onClose(action) {\n      this.close();\n\n      if (this.callback) {\n        this.callback(action);\n      }\n    },\n    onOpened: function onOpened() {\n      this.$emit('opened');\n    },\n    onClosed: function onClosed() {\n      this.$emit('closed');\n    },\n    genButtons: function genButtons() {\n      var _this2 = this,\n          _ref;\n\n      var h = this.$createElement;\n      var multiple = this.showCancelButton && this.showConfirmButton;\n      return h(\"div\", {\n        \"class\": [BORDER_TOP, bem('footer', {\n          buttons: multiple\n        })]\n      }, [this.showCancelButton && h(Button, {\n        \"attrs\": {\n          \"size\": \"large\",\n          \"loading\": this.loading.cancel,\n          \"text\": this.cancelButtonText || t('cancel')\n        },\n        \"class\": bem('cancel'),\n        \"style\": {\n          color: this.cancelButtonColor\n        },\n        \"on\": {\n          \"click\": function click() {\n            _this2.handleAction('cancel');\n          }\n        }\n      }), this.showConfirmButton && h(Button, {\n        \"attrs\": {\n          \"size\": \"large\",\n          \"loading\": this.loading.confirm,\n          \"text\": this.confirmButtonText || t('confirm')\n        },\n        \"class\": [bem('confirm'), (_ref = {}, _ref[BORDER_LEFT] = multiple, _ref)],\n        \"style\": {\n          color: this.confirmButtonColor\n        },\n        \"on\": {\n          \"click\": function click() {\n            _this2.handleAction('confirm');\n          }\n        }\n      })]);\n    }\n  },\n  render: function render() {\n    var _bem;\n\n    var h = arguments[0];\n\n    if (!this.shouldRender) {\n      return;\n    }\n\n    var message = this.message,\n        messageAlign = this.messageAlign;\n    var messageSlot = this.slots();\n    var title = this.slots('title') || this.title;\n    var Title = title && h(\"div\", {\n      \"class\": bem('header', {\n        isolated: !message && !messageSlot\n      })\n    }, [title]);\n    var Content = (messageSlot || message) && h(\"div\", {\n      \"class\": bem('content')\n    }, [messageSlot || h(\"div\", {\n      \"domProps\": {\n        \"innerHTML\": message\n      },\n      \"class\": bem('message', (_bem = {\n        'has-title': title\n      }, _bem[messageAlign] = messageAlign, _bem))\n    })]);\n    return h(\"transition\", {\n      \"attrs\": {\n        \"name\": this.transition\n      },\n      \"on\": {\n        \"afterEnter\": this.onOpened,\n        \"afterLeave\": this.onClosed\n      }\n    }, [h(\"div\", {\n      \"directives\": [{\n        name: \"show\",\n        value: this.value\n      }],\n      \"attrs\": {\n        \"role\": \"dialog\",\n        \"aria-labelledby\": this.title || message\n      },\n      \"class\": [bem(), this.className],\n      \"style\": {\n        width: addUnit(this.width)\n      }\n    }, [Title, Content, this.genButtons()])]);\n  }\n});","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"page-settings\"}},[_c('NavBar',{attrs:{\"title\":\"设置\",\"border\":\"\",\"fixed\":\"\",\"placeholder\":\"\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.jumpToPreviousPage}}),_c('VanImage',{attrs:{\"id\":\"page-settings-main-icon\",\"round\":\"\",\"width\":\"100px\",\"height\":\"100px\",\"fit\":\"cover\",\"src\":require('@/assets/others/default_avatar.png')}}),_c('h3',{attrs:{\"id\":\"page-settings-main-nickname\"}},[_vm._v(\" \"+_vm._s(_vm.appUserInfo.nickName)+\" \")]),_c('CellGroup',{attrs:{\"title\":\"基本信息\"}},[_c('Cell',{attrs:{\"title\":\"UID\",\"value\":_vm.appUserInfo.uid,\"center\":\"\"}}),_c('Cell',{attrs:{\"title\":\"用户名\",\"value\":_vm.appUserInfo.userName,\"center\":\"\"}}),_c('Cell',{attrs:{\"title\":\"注册时间\",\"value\":_vm.appUserInfo.createdAt,\"center\":\"\"}})],1),_c('CellGroup',{attrs:{\"title\":\"信息修改\"}},[_c('Cell',{attrs:{\"title\":\"修改昵称\",\"is-link\":\"\",\"center\":\"\"},on:{\"click\":_vm.togglePopupNickname}}),_c('Cell',{attrs:{\"title\":\"修改密码\",\"is-link\":\"\",\"center\":\"\"},on:{\"click\":_vm.togglePopupPassword}})],1),_c('CellGroup',{attrs:{\"title\":\"数据同步\"}},[_c('Cell',{attrs:{\"title\":\"上传数据\",\"value\":\"上传本地数据至云端\",\"is-link\":\"\",\"center\":\"\"},on:{\"click\":_vm.uploadUserData}}),_c('Cell',{attrs:{\"title\":\"下载数据\",\"value\":\"下载云端数据至本地\",\"is-link\":\"\",\"center\":\"\"},on:{\"click\":_vm.downloadUserData}})],1),_c('div',{attrs:{\"id\":\"page-settings-main-btns\"}},[_c('Button',{attrs:{\"id\":\"page-settings-main-btn-unregistration\",\"type\":\"danger\",\"block\":\"\",\"round\":\"\"},on:{\"click\":_vm.deleteUserAccount}},[_vm._v(\" 注销账号 \")]),_c('Button',{attrs:{\"id\":\"page-settings-main-btn-logout\",\"type\":\"warning\",\"block\":\"\",\"round\":\"\"},on:{\"click\":_vm.requestToLogout}},[_vm._v(\" 退出登录 \")])],1),_c('PageSettingsNickname',{attrs:{\"show\":_vm.showPopupNickname},on:{\"update:show\":function($event){_vm.showPopupNickname=$event}}}),_c('PageSettingsPassword',{attrs:{\"show\":_vm.showPopupPassword},on:{\"update:show\":function($event){_vm.showPopupPassword=$event}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","// Utils\nimport { createNamespace } from '../utils';\nimport { BORDER_BOTTOM } from '../utils/constant'; // Components\n\nimport Icon from '../icon';\n\nvar _createNamespace = createNamespace('nav-bar'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nexport default createComponent({\n  props: {\n    title: String,\n    fixed: Boolean,\n    zIndex: [Number, String],\n    leftText: String,\n    rightText: String,\n    leftArrow: Boolean,\n    placeholder: Boolean,\n    border: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data: function data() {\n    return {\n      height: null\n    };\n  },\n  mounted: function mounted() {\n    if (this.placeholder && this.fixed) {\n      this.height = this.$refs.navBar.getBoundingClientRect().height;\n    }\n  },\n  methods: {\n    genLeft: function genLeft() {\n      var h = this.$createElement;\n      var leftSlot = this.slots('left');\n\n      if (leftSlot) {\n        return leftSlot;\n      }\n\n      return [this.leftArrow && h(Icon, {\n        \"class\": bem('arrow'),\n        \"attrs\": {\n          \"name\": \"arrow-left\"\n        }\n      }), this.leftText && h(\"span\", {\n        \"class\": bem('text')\n      }, [this.leftText])];\n    },\n    genRight: function genRight() {\n      var h = this.$createElement;\n      var rightSlot = this.slots('right');\n\n      if (rightSlot) {\n        return rightSlot;\n      }\n\n      if (this.rightText) {\n        return h(\"span\", {\n          \"class\": bem('text')\n        }, [this.rightText]);\n      }\n    },\n    genNavBar: function genNavBar() {\n      var _ref;\n\n      var h = this.$createElement;\n      return h(\"div\", {\n        \"ref\": \"navBar\",\n        \"style\": {\n          zIndex: this.zIndex\n        },\n        \"class\": [bem({\n          fixed: this.fixed\n        }), (_ref = {}, _ref[BORDER_BOTTOM] = this.border, _ref)]\n      }, [h(\"div\", {\n        \"class\": bem('left'),\n        \"on\": {\n          \"click\": this.onClickLeft\n        }\n      }, [this.genLeft()]), h(\"div\", {\n        \"class\": [bem('title'), 'van-ellipsis']\n      }, [this.slots('title') || this.title]), h(\"div\", {\n        \"class\": bem('right'),\n        \"on\": {\n          \"click\": this.onClickRight\n        }\n      }, [this.genRight()])]);\n    },\n    onClickLeft: function onClickLeft(event) {\n      this.$emit('click-left', event);\n    },\n    onClickRight: function onClickRight(event) {\n      this.$emit('click-right', event);\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n\n    if (this.placeholder && this.fixed) {\n      return h(\"div\", {\n        \"class\": bem('placeholder'),\n        \"style\": {\n          height: this.height + \"px\"\n        }\n      }, [this.genNavBar()]);\n    }\n\n    return this.genNavBar();\n  }\n});","import _mergeJSXProps from \"@vue/babel-helper-vue-jsx-merge-props\";\n// Utils\nimport { createNamespace } from '../utils';\nimport { inherit } from '../utils/functional';\nimport { BORDER_TOP_BOTTOM } from '../utils/constant'; // Types\n\nvar _createNamespace = createNamespace('cell-group'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nfunction CellGroup(h, props, slots, ctx) {\n  var _ref;\n\n  var Group = h(\"div\", _mergeJSXProps([{\n    \"class\": [bem(), (_ref = {}, _ref[BORDER_TOP_BOTTOM] = props.border, _ref)]\n  }, inherit(ctx, true)]), [slots.default == null ? void 0 : slots.default()]);\n\n  if (props.title || slots.title) {\n    return h(\"div\", [h(\"div\", {\n      \"class\": bem('title')\n    }, [slots.title ? slots.title() : props.title]), Group]);\n  }\n\n  return Group;\n}\n\nCellGroup.props = {\n  title: String,\n  border: {\n    type: Boolean,\n    default: true\n  }\n};\nexport default createComponent(CellGroup);","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Popup',{attrs:{\"id\":\"page-settings-password\",\"position\":\"bottom\",\"closeable\":\"\",\"safe-area-inset-bottom\":\"\",\"close-on-click-overlay\":false},on:{\"open\":_vm.onPopupOpen,\"close\":_vm.onPopupClose},model:{value:(_vm.showPopup),callback:function ($$v) {_vm.showPopup=$$v},expression:\"showPopup\"}},[_c('div',{staticClass:\"van-hairline--bottom\",attrs:{\"id\":\"page-settings-password-title\"}},[_vm._v(\" 修改密码 \")]),_c('Form',{ref:\"pageSettingsPasswordFrom\",attrs:{\"id\":\"page-settings-password-form\",\"show-error\":false},on:{\"submit\":_vm.doSubmitFormValues}},[_c('Field',{ref:\"fieldOldPassword\",attrs:{\"name\":\"oldPassword\",\"type\":\"password\",\"label\":\"旧密码\",\"placeholder\":\"请输入8至20个字符（字母或数字）\",\"rules\":_vm.rulesOldPassword},model:{value:(_vm.formValues.oldPassword),callback:function ($$v) {_vm.$set(_vm.formValues, \"oldPassword\", $$v)},expression:\"formValues.oldPassword\"}}),_c('Field',{ref:\"fieldNewPassword\",attrs:{\"name\":\"newPassword\",\"type\":\"password\",\"label\":\"新密码\",\"placeholder\":\"请输入8至20个字符（字母或数字）\",\"rules\":_vm.rulesNewPassword},model:{value:(_vm.formValues.newPassword),callback:function ($$v) {_vm.$set(_vm.formValues, \"newPassword\", $$v)},expression:\"formValues.newPassword\"}}),_c('Field',{ref:\"fieldConfirmation\",attrs:{\"name\":\"confirmation\",\"type\":\"password\",\"label\":\"密码确认\",\"placeholder\":\"请再次输入密码\",\"rules\":_vm.rulesConfirmation},model:{value:(_vm.formValues.confirmation),callback:function ($$v) {_vm.$set(_vm.formValues, \"confirmation\", $$v)},expression:\"formValues.confirmation\"}}),_c('div',{attrs:{\"id\":\"page-settings-password-btns\"}},[_c('Button',{attrs:{\"round\":\"\",\"block\":\"\",\"type\":\"info\",\"native-type\":\"submit\"}},[_vm._v(\" 确认修改 \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <Popup\r\n    id=\"page-settings-password\"\r\n    v-model=\"showPopup\"\r\n    position=\"bottom\"\r\n    closeable\r\n    safe-area-inset-bottom\r\n    :close-on-click-overlay=\"false\"\r\n    @open=\"onPopupOpen\"\r\n    @close=\"onPopupClose\"\r\n  >\r\n    <div\r\n      id=\"page-settings-password-title\"\r\n      class=\"van-hairline--bottom\"\r\n    >\r\n      修改密码\r\n    </div>\r\n    <Form\r\n      id=\"page-settings-password-form\"\r\n      ref=\"pageSettingsPasswordFrom\"\r\n      :show-error=\"false\"\r\n      @submit=\"doSubmitFormValues\"\r\n    >\r\n      <Field\r\n        ref=\"fieldOldPassword\"\r\n        v-model=\"formValues.oldPassword\"\r\n        name=\"oldPassword\"\r\n        type=\"password\"\r\n        label=\"旧密码\"\r\n        placeholder=\"请输入8至20个字符（字母或数字）\"\r\n        :rules=\"rulesOldPassword\"\r\n      />\r\n      <Field\r\n        ref=\"fieldNewPassword\"\r\n        v-model=\"formValues.newPassword\"\r\n        name=\"newPassword\"\r\n        type=\"password\"\r\n        label=\"新密码\"\r\n        placeholder=\"请输入8至20个字符（字母或数字）\"\r\n        :rules=\"rulesNewPassword\"\r\n      />\r\n      <Field\r\n        ref=\"fieldConfirmation\"\r\n        v-model=\"formValues.confirmation\"\r\n        name=\"confirmation\"\r\n        type=\"password\"\r\n        label=\"密码确认\"\r\n        placeholder=\"请再次输入密码\"\r\n        :rules=\"rulesConfirmation\"\r\n      />\r\n      <div id=\"page-settings-password-btns\">\r\n        <Button\r\n          round\r\n          block\r\n          type=\"info\"\r\n          native-type=\"submit\"\r\n        >\r\n          确认修改\r\n        </Button>\r\n      </div>\r\n    </Form>\r\n  </Popup>\r\n</template>\r\n\r\n<style scoped>\r\n#page-settings-password-title {\r\n  font-size: 16px;\r\n  line-height: 54px;\r\n  text-align: center;\r\n}\r\n\r\n#page-settings-password-btns {\r\n  padding: 32px 16px;\r\n}\r\n</style>\r\n\r\n<script>\r\nimport { SHA256Calculator } from '@/utils/hashCalculator.js'\r\nimport { axiosRenewAccessToken, axiosEncryptWithRSAOAEP } from '@/utils/axiosInterceptor.js'\r\nimport { urlAPIGetRSACryptionKey, urlAPIPatchUserPassword } from '@/api/requestURLs.js'\r\nimport { Button, Field, Form, Notify, Popup } from 'vant'\r\n\r\nexport default {\r\n  name: 'PageSettingsPassword',\r\n  components: {\r\n    Button,\r\n    Field,\r\n    Form,\r\n    Popup\r\n  },\r\n  props: {\r\n    show: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      patchingPassword: false,\r\n      urls: {\r\n        getRSAPubKey: urlAPIGetRSACryptionKey,\r\n        patchPassword: urlAPIPatchUserPassword\r\n      },\r\n      formValues: {\r\n        oldPassword: '',\r\n        newPassword: '',\r\n        confirmation: ''\r\n      },\r\n      rulesOldPassword: [\r\n        {\r\n          required: true,\r\n          message: '请填写密码'\r\n        },\r\n        {\r\n          message: '',\r\n          validator: this.checkPasswordFormat\r\n        }\r\n      ],\r\n      rulesNewPassword: [\r\n        {\r\n          required: true,\r\n          message: '请填写密码'\r\n        },\r\n        {\r\n          message: '',\r\n          validator: this.checkPasswordFormat\r\n        },\r\n        {\r\n          message: '新密码应与旧密码不同',\r\n          validator: this.distinguishPassword\r\n        }\r\n      ],\r\n      rulesConfirmation: [\r\n        {\r\n          required: true,\r\n          message: '请再次填写新密码'\r\n        },\r\n        {\r\n          message: '两次填写的新密码不一致',\r\n          validator: this.confirmPassword\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  computed: {\r\n    showPopup: {\r\n      get () {\r\n        return this.show\r\n      },\r\n      set (value) {\r\n        this.$emit('update:show', value)\r\n      }\r\n    },\r\n    isConnected () {\r\n      return this.$store.getters.isConnected\r\n    },\r\n    isLoggedIn () {\r\n      return this.$store.getters.isLoggedIn\r\n    }\r\n  },\r\n  methods: {\r\n    // 检查密码格式是否正确\r\n    checkPasswordFormat (value, rule) {\r\n      const pattern = /^[a-z0-9]+$/i\r\n      let checkPassed = false\r\n      if (!pattern.test(value)) {\r\n        rule.message = '不应包含除字母和数字以外的字符'\r\n      } else if (value.length < 8) {\r\n        rule.message = '字符不应少于8个'\r\n      } else if (value.length > 20) {\r\n        rule.message = '字符不应多于20个'\r\n      } else {\r\n        checkPassed = true\r\n      }\r\n      return checkPassed\r\n    },\r\n    // 检查新旧密码是否相同\r\n    distinguishPassword (value) {\r\n      return this.formValues.oldPassword !== value\r\n    },\r\n    // 检查两次填写的新密码是否相同\r\n    confirmPassword (value) {\r\n      return this.formValues.newPassword === value\r\n    },\r\n    // 响应弹出层打开事件\r\n    onPopupOpen () {\r\n      // 重置表单数据\r\n      Object.assign(this.formValues, {\r\n        oldPassword: '',\r\n        newPassword: '',\r\n        confirmation: ''\r\n      })\r\n    },\r\n    // 重置表单数据\r\n    onPopupClose () {\r\n      // 重置表单校验\r\n      this.$refs.pageSettingsPasswordFrom.resetValidation()\r\n    },\r\n    // 显示服务器连接失败通知\r\n    notifyBadConnection () {\r\n      Notify({\r\n        type: 'danger',\r\n        message: '连接服务器失败'\r\n      })\r\n    },\r\n    // 从后端获取RSA-OAEP公钥\r\n    getRSAPubKey () {\r\n      return axiosRenewAccessToken().get(this.urls.getRSAPubKey)\r\n        .then(response => response.data.payload.key)\r\n        .catch(error => Promise.reject(error))\r\n    },\r\n    // 前端向后端发送加密后的信息\r\n    patchRSAEncryptedMsg (rsaPubKey, message) {\r\n      return axiosEncryptWithRSAOAEP(rsaPubKey).patch(this.urls.patchPassword, message)\r\n        .then(response => response)\r\n        .catch(error => {\r\n          const resMsg = error?.response?.data?.message\r\n          if (resMsg === 'crypto/bcrypt: hashedPassword is not the hash of the given password') {\r\n            this.$refs.fieldOldPassword.validateMessage = '输入的旧密码不正确'\r\n          }\r\n          if (resMsg?.includes('RequestUserPasswordChange.newPassword')) {\r\n            this.$refs.fieldNewPassword.validateMessage = '请再次检查新密码'\r\n          }\r\n          return Promise.reject(error)\r\n        })\r\n    },\r\n    // 异步提交表单数据\r\n    async submitFormValues (values) {\r\n      // 从后端获取RSA-OAEP公钥\r\n      const rsaPubKey = await this.getRSAPubKey()\r\n      // 加密相关表单数据\r\n      const message = {\r\n        oldPassword: SHA256Calculator(values.oldPassword),\r\n        newPassword: SHA256Calculator(values.newPassword)\r\n      }\r\n      // 前端向后端发送加密后的信息\r\n      const response = await this.patchRSAEncryptedMsg(rsaPubKey, message)\r\n      // 返回响应结果\r\n      return response\r\n    },\r\n    // 执行异步提交表单数据\r\n    doSubmitFormValues (values) {\r\n      // 防止连续多次请求\r\n      if (this.patchingPassword) {\r\n        return\r\n      } else {\r\n        this.patchingPassword = true\r\n      }\r\n      // 未成功连接服务器前不执行后续操作\r\n      if (!this.isConnected) {\r\n        this.notifyBadConnection()\r\n        return\r\n      }\r\n      // 在连接服务器的前提下，提交表单数据\r\n      this.submitFormValues(values)\r\n        .then(response => {\r\n          // 修改成功的通知\r\n          Notify({\r\n            type: 'success',\r\n            message: '密码修改成功'\r\n          })\r\n          // 关闭弹出层\r\n          this.showPopup = false\r\n          // 退出登录，清除本地数据\r\n          Promise.allSettled([\r\n            // 清除访问令牌\r\n            this.$store.dispatch('updateAppJWTString', undefined),\r\n            // 清除用户信息\r\n            this.$store.dispatch('updateAppUserInfo', undefined)\r\n          ]).then(() => {\r\n            // 跳转到登录页\r\n            this.$router.replace('/login')\r\n          })\r\n        })\r\n        .catch(() => {\r\n          // 密码修改失败的通知\r\n          this.isConnected && this.isLoggedIn && Notify({\r\n            type: 'danger',\r\n            message: '密码修改失败'\r\n          })\r\n        })\r\n        .finally(() => {\r\n          this.patchingPassword = false\r\n        })\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageSettingsPassword.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageSettingsPassword.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PageSettingsPassword.vue?vue&type=template&id=44a32f3b&scoped=true&\"\nimport script from \"./PageSettingsPassword.vue?vue&type=script&lang=js&\"\nexport * from \"./PageSettingsPassword.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PageSettingsPassword.vue?vue&type=style&index=0&id=44a32f3b&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"44a32f3b\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Popup',{attrs:{\"id\":\"page-settings-nickname\",\"position\":\"bottom\",\"closeable\":\"\",\"safe-area-inset-bottom\":\"\",\"close-on-click-overlay\":false},on:{\"open\":_vm.onPopupOpen,\"close\":_vm.onPopupClose},model:{value:(_vm.showPopup),callback:function ($$v) {_vm.showPopup=$$v},expression:\"showPopup\"}},[_c('div',{staticClass:\"van-hairline--bottom\",attrs:{\"id\":\"page-settings-nickname-title\"}},[_vm._v(\" 修改昵称 \")]),_c('Form',{ref:\"pageSettingsNicknameForm\",attrs:{\"id\":\"page-settings-nickname-form\",\"show-error\":false},on:{\"submit\":_vm.doSubmitFormValues}},[_c('Field',{ref:\"fieldOldNickname\",attrs:{\"name\":\"oldNickname\",\"label\":\"旧昵称\",\"placeholder\":\"请输入1至30个字符（字母/数字/汉字）\",\"rules\":_vm.rulesOldNickname,\"disabled\":\"\"},model:{value:(_vm.formValues.oldNickname),callback:function ($$v) {_vm.$set(_vm.formValues, \"oldNickname\", $$v)},expression:\"formValues.oldNickname\"}}),_c('Field',{ref:\"fieldNewNickname\",attrs:{\"name\":\"newNickname\",\"label\":\"新昵称\",\"placeholder\":\"请输入1至30个字符（字母/数字/汉字）\",\"rules\":_vm.rulesNewNickname},model:{value:(_vm.formValues.newNickname),callback:function ($$v) {_vm.$set(_vm.formValues, \"newNickname\", $$v)},expression:\"formValues.newNickname\"}}),_c('div',{attrs:{\"id\":\"page-settings-nickname-btns\"}},[_c('Button',{attrs:{\"round\":\"\",\"block\":\"\",\"type\":\"info\",\"native-type\":\"submit\"}},[_vm._v(\" 确认修改 \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <Popup\r\n    id=\"page-settings-nickname\"\r\n    v-model=\"showPopup\"\r\n    position=\"bottom\"\r\n    closeable\r\n    safe-area-inset-bottom\r\n    :close-on-click-overlay=\"false\"\r\n    @open=\"onPopupOpen\"\r\n    @close=\"onPopupClose\"\r\n  >\r\n    <div\r\n      id=\"page-settings-nickname-title\"\r\n      class=\"van-hairline--bottom\"\r\n    >\r\n      修改昵称\r\n    </div>\r\n    <Form\r\n      id=\"page-settings-nickname-form\"\r\n      ref=\"pageSettingsNicknameForm\"\r\n      :show-error=\"false\"\r\n      @submit=\"doSubmitFormValues\"\r\n    >\r\n      <Field\r\n        ref=\"fieldOldNickname\"\r\n        v-model=\"formValues.oldNickname\"\r\n        name=\"oldNickname\"\r\n        label=\"旧昵称\"\r\n        placeholder=\"请输入1至30个字符（字母/数字/汉字）\"\r\n        :rules=\"rulesOldNickname\"\r\n        disabled\r\n      />\r\n      <Field\r\n        ref=\"fieldNewNickname\"\r\n        v-model=\"formValues.newNickname\"\r\n        name=\"newNickname\"\r\n        label=\"新昵称\"\r\n        placeholder=\"请输入1至30个字符（字母/数字/汉字）\"\r\n        :rules=\"rulesNewNickname\"\r\n      />\r\n      <div id=\"page-settings-nickname-btns\">\r\n        <Button\r\n          round\r\n          block\r\n          type=\"info\"\r\n          native-type=\"submit\"\r\n        >\r\n          确认修改\r\n        </Button>\r\n      </div>\r\n    </Form>\r\n  </Popup>\r\n</template>\r\n\r\n<style scoped>\r\n#page-settings-nickname-title {\r\n  font-size: 16px;\r\n  line-height: 54px;\r\n  text-align: center;\r\n}\r\n\r\n#page-settings-nickname-btns {\r\n  padding: 32px 16px;\r\n}\r\n</style>\r\n\r\n<script>\r\nimport { axiosEncryptWithAESCBC } from '@/utils/axiosInterceptor.js'\r\nimport { urlAPIPatchUserNickname } from '@/api/requestURLs.js'\r\nimport { Button, Field, Form, Notify, Popup } from 'vant'\r\n\r\nexport default {\r\n  name: 'PageSettingsNickname',\r\n  components: {\r\n    Button,\r\n    Field,\r\n    Form,\r\n    Popup\r\n  },\r\n  props: {\r\n    show: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      patchingNickname: false,\r\n      urls: {\r\n        patchNickname: urlAPIPatchUserNickname\r\n      },\r\n      formValues: {\r\n        oldNickname: '',\r\n        newNickname: ''\r\n      },\r\n      rulesOldNickname: [\r\n        {\r\n          required: true,\r\n          message: '请填写旧昵称'\r\n        },\r\n        {\r\n          message: '',\r\n          validator: this.checkNicknameFormat\r\n        }\r\n      ],\r\n      rulesNewNickname: [\r\n        {\r\n          required: true,\r\n          message: '请填写新昵称'\r\n        },\r\n        {\r\n          message: '',\r\n          validator: this.checkNicknameFormat\r\n        },\r\n        {\r\n          message: '新昵称应与旧昵称不同',\r\n          validator: this.distinguishNickname\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  computed: {\r\n    showPopup: {\r\n      get () {\r\n        return this.show\r\n      },\r\n      set (value) {\r\n        this.$emit('update:show', value)\r\n      }\r\n    },\r\n    isConnected () {\r\n      return this.$store.getters.isConnected\r\n    },\r\n    isLoggedIn () {\r\n      return this.$store.getters.isLoggedIn\r\n    }\r\n  },\r\n  methods: {\r\n    // 检查昵称格式\r\n    checkNicknameFormat (value, rule) {\r\n      const pattern = /^[\\u4e00-\\u9fa5\\w]+$/\r\n      let checkPassed = false\r\n      if (!pattern.test(value)) {\r\n        rule.message = '只能使用：字母/数字/汉字'\r\n      } else if (value.length < 1) {\r\n        rule.message = '字符不应少于1个'\r\n      } else if (value.length > 30) {\r\n        rule.message = '字符不应多于30个'\r\n      } else {\r\n        checkPassed = true\r\n      }\r\n      return checkPassed\r\n    },\r\n    // 检查新旧昵称是否相同\r\n    distinguishNickname (value) {\r\n      return this.formValues.oldNickname !== value\r\n    },\r\n    // 响应弹出层显示事件\r\n    onPopupOpen () {\r\n      // 重置表单数据\r\n      Object.assign(this.formValues, {\r\n        oldNickname: this.$store.state.appUserInfo.nickName,\r\n        newNickname: ''\r\n      })\r\n    },\r\n    // 重置表单状态\r\n    onPopupClose () {\r\n      // 重置表单校验\r\n      this.$refs.pageSettingsNicknameForm.resetValidation()\r\n    },\r\n    // 显示服务器连接失败通知\r\n    notifyBadConnection () {\r\n      Notify({\r\n        type: 'danger',\r\n        message: '连接服务器失败'\r\n      })\r\n    },\r\n    // 前端向后端发送加密后的信息\r\n    patchAESEncryptedMsg (message) {\r\n      return axiosEncryptWithAESCBC().patch(this.urls.patchNickname, message)\r\n        .then(response => response)\r\n        .catch(error => {\r\n          const resMsg = error?.response?.data?.message\r\n          if (resMsg === 'mismatched old nickname') {\r\n            this.$refs.fieldOldNickname.validateMessage = '旧昵称不匹配'\r\n          }\r\n          if (resMsg?.includes('RequestUserNicknameChange.oldNickname')) {\r\n            this.$refs.fieldOldNickname.validateMessage = '请再次检查旧昵称'\r\n          }\r\n          if (resMsg?.includes('RequestUserNicknameChange.newNickname')) {\r\n            this.$refs.fieldNewNickname.validateMessage = '请再次检查新昵称'\r\n          }\r\n          return Promise.reject(error)\r\n        })\r\n    },\r\n    // 异步提交表单数据\r\n    async submitFormValues (values) {\r\n      const message = {\r\n        oldNickname: this.formValues.oldNickname,\r\n        newNickname: this.formValues.newNickname\r\n      }\r\n      const response = await this.patchAESEncryptedMsg(message)\r\n      return response\r\n    },\r\n    // 执行异步提交表单数据\r\n    doSubmitFormValues (values) {\r\n      // 防止连续多次请求\r\n      if (this.patchingNickname) {\r\n        return\r\n      } else {\r\n        this.patchingNickname = true\r\n      }\r\n      // 未成功连接服务器前不执行后续操作\r\n      if (!this.isConnected) {\r\n        this.notifyBadConnection()\r\n        return\r\n      }\r\n      // 在连接服务器的前提下，提交表单数据\r\n      this.submitFormValues(values)\r\n        .then(() => {\r\n          // 修改成功的通知\r\n          Notify({\r\n            type: 'success',\r\n            message: '昵称修改成功'\r\n          })\r\n          // 保存昵称至本地\r\n          this.$store.dispatch('updateAppUserInfo', {\r\n            nickName: this.formValues.newNickname\r\n          }).then(() => {\r\n            // 关闭弹出层\r\n            this.showPopup = false\r\n          })\r\n        })\r\n        .catch(() => {\r\n          // 昵称修改失败的通知\r\n          this.isConnected && this.isLoggedIn && Notify({\r\n            type: 'danger',\r\n            message: '昵称修改失败'\r\n          })\r\n        })\r\n        .finally(() => {\r\n          this.patchingNickname = false\r\n        })\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageSettingsNickname.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageSettingsNickname.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PageSettingsNickname.vue?vue&type=template&id=a0e5af74&scoped=true&\"\nimport script from \"./PageSettingsNickname.vue?vue&type=script&lang=js&\"\nexport * from \"./PageSettingsNickname.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PageSettingsNickname.vue?vue&type=style&index=0&id=a0e5af74&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a0e5af74\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div id=\"page-settings\">\r\n    <NavBar\r\n      title=\"设置\"\r\n      border\r\n      fixed\r\n      placeholder\r\n      left-arrow\r\n      @click-left=\"jumpToPreviousPage\"\r\n    />\r\n    <VanImage\r\n      id=\"page-settings-main-icon\"\r\n      round\r\n      width=\"100px\"\r\n      height=\"100px\"\r\n      fit=\"cover\"\r\n      :src=\"require('@/assets/others/default_avatar.png')\"\r\n    />\r\n    <h3 id=\"page-settings-main-nickname\">\r\n      {{appUserInfo.nickName}}\r\n    </h3>\r\n    <CellGroup title=\"基本信息\">\r\n      <Cell\r\n        title=\"UID\"\r\n        :value=\"appUserInfo.uid\"\r\n        center\r\n      />\r\n      <Cell\r\n        title=\"用户名\"\r\n        :value=\"appUserInfo.userName\"\r\n        center\r\n      />\r\n      <Cell\r\n        title=\"注册时间\"\r\n        :value=\"appUserInfo.createdAt\"\r\n        center\r\n      />\r\n    </CellGroup>\r\n    <CellGroup title=\"信息修改\">\r\n      <Cell\r\n        title=\"修改昵称\"\r\n        is-link\r\n        center\r\n        @click=\"togglePopupNickname\"\r\n      />\r\n      <Cell\r\n        title=\"修改密码\"\r\n        is-link\r\n        center\r\n        @click=\"togglePopupPassword\"\r\n      />\r\n    </CellGroup>\r\n    <CellGroup title=\"数据同步\">\r\n      <Cell\r\n        title=\"上传数据\"\r\n        value=\"上传本地数据至云端\"\r\n        is-link\r\n        center\r\n        @click=\"uploadUserData\"\r\n      />\r\n      <Cell\r\n        title=\"下载数据\"\r\n        value=\"下载云端数据至本地\"\r\n        is-link\r\n        center\r\n        @click=\"downloadUserData\"\r\n      />\r\n    </CellGroup>\r\n    <div id=\"page-settings-main-btns\">\r\n      <Button\r\n        id=\"page-settings-main-btn-unregistration\"\r\n        type=\"danger\"\r\n        block\r\n        round\r\n        @click=\"deleteUserAccount\"\r\n      >\r\n        注销账号\r\n      </Button>\r\n      <Button\r\n        id=\"page-settings-main-btn-logout\"\r\n        type=\"warning\"\r\n        block\r\n        round\r\n        @click=\"requestToLogout\"\r\n      >\r\n        退出登录\r\n      </Button>\r\n    </div>\r\n    <PageSettingsNickname\r\n      :show.sync=\"showPopupNickname\"\r\n    />\r\n    <PageSettingsPassword\r\n      :show.sync=\"showPopupPassword\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n#page-settings {\r\n  height: 100%;\r\n}\r\n\r\n#page-settings-main-icon {\r\n  display: block;\r\n  margin: 16px auto;\r\n}\r\n\r\n#page-settings-main-nickname {\r\n  display: block;\r\n  margin: 0;\r\n  font-size: 16px;\r\n  font-weight: normal;\r\n  text-align: center;\r\n  color: var(--primary-color);\r\n}\r\n\r\n#page-settings-main-btns {\r\n  padding: 32px 16px;\r\n}\r\n\r\n#page-settings-main-btn-logout {\r\n  margin-top: 16px;\r\n}\r\n\r\n#page-settings-main-btn-retry {\r\n  position: fixed;\r\n  right: 30px;\r\n  bottom: 30px;\r\n}\r\n</style>\r\n\r\n<script>\r\nimport {\r\n  baseURLImg,\r\n  urlAPIDeleteUserUnregistration,\r\n  urlAPIGetUserLogout,\r\n  urlAPIPostUserBookmark,\r\n  urlAPIPostUserBackground,\r\n  urlAPIGetUserBookmark,\r\n  urlAPIGetUserBackground\r\n} from '@/api/requestURLs.js'\r\nimport { AESCBCEncryptor } from '@/utils/AESCBCCryptor.js'\r\nimport { axiosRenewAccessToken, axiosDecryptWithAESCBC } from '@/utils/axiosInterceptor.js'\r\nimport { Button, Cell, CellGroup, Dialog, Image as VanImage, NavBar, Notify } from 'vant'\r\nimport PageSettingsPassword from '@/components/PageSettingsPassword.vue'\r\nimport PageSettingsNickname from '@/components/PageSettingsNickname.vue'\r\n\r\nexport default {\r\n  name: 'PageSettings',\r\n  components: {\r\n    Button,\r\n    Cell,\r\n    CellGroup,\r\n    NavBar,\r\n    VanImage,\r\n    PageSettingsNickname,\r\n    PageSettingsPassword\r\n  },\r\n  data () {\r\n    return {\r\n      isDeletingUserAccount: false,\r\n      isLoggingOut: false,\r\n      isUploadingUserData: false,\r\n      isDownloadingUserData: false,\r\n      urls: {\r\n        urlDeleteAccount: urlAPIDeleteUserUnregistration,\r\n        urlGetUserLogout: urlAPIGetUserLogout,\r\n        urlPostUserBookmark: urlAPIPostUserBookmark,\r\n        urlPostUserBackground: urlAPIPostUserBackground,\r\n        urlGetUserBookmark: urlAPIGetUserBookmark,\r\n        urlGetUserBackground: urlAPIGetUserBackground\r\n      },\r\n      showPopupPassword: false,\r\n      showPopupNickname: false\r\n    }\r\n  },\r\n  computed: {\r\n    appUserInfo () {\r\n      return this.$store.state.appUserInfo\r\n    },\r\n    isConnected () {\r\n      return this.$store.getters.isConnected\r\n    },\r\n    isLoggedIn () {\r\n      return this.$store.getters.isLoggedIn\r\n    }\r\n  },\r\n  watch: {\r\n    isConnected (value) {\r\n      value || this.notifyBadConnection()\r\n    },\r\n    isLoggedIn (value) {\r\n      if (value) return\r\n      this.$router.replace('/login')\r\n      this.notifyLoginAgain()\r\n    }\r\n  },\r\n  methods: {\r\n    // 跳转到上一页\r\n    jumpToPreviousPage () {\r\n      this.$router.back()\r\n    },\r\n    // 显示修改昵称弹出层\r\n    togglePopupNickname () {\r\n      this.showPopupNickname = true\r\n    },\r\n    // 显示修改密码弹出层\r\n    togglePopupPassword () {\r\n      this.showPopupPassword = true\r\n    },\r\n    // 显示服务器连接失败通知\r\n    notifyBadConnection () {\r\n      Notify({\r\n        type: 'danger',\r\n        message: '连接服务器失败'\r\n      })\r\n    },\r\n    // 显示重新登录通知\r\n    notifyLoginAgain () {\r\n      Notify({\r\n        type: 'warning',\r\n        message: '请重新登录'\r\n      })\r\n    },\r\n    // 显示请求频率过高通知\r\n    notifyRequestFrequencyHigh () {\r\n      Notify({\r\n        type: 'warning',\r\n        message: '请求过于频繁，请稍后重试'\r\n      })\r\n    },\r\n    // 清除本地相关数据\r\n    clearLocalDate () {\r\n      // 清除访问令牌\r\n      this.$store.dispatch('updateAppJWTString', undefined)\r\n      // 清除用户信息\r\n      this.$store.dispatch('updateAppUserInfo', undefined)\r\n    },\r\n    // 注销账号\r\n    async deleteUserAccount () {\r\n      // 防止多次连续请求\r\n      if (this.isDeletingUserAccount) {\r\n        return\r\n      }\r\n      this.isDeletingUserAccount = true\r\n      // 再次确认是否删除账户\r\n      const confirmed = await Dialog.confirm({\r\n        title: '警告',\r\n        message: '请再次确认是否注销账户'\r\n      }).then(() => true)\r\n        .catch(() => false)\r\n      if (!confirmed) {\r\n        return\r\n      }\r\n      // 未成功连接服务器\r\n      if (!this.isConnected) {\r\n        this.notifyBadConnection()\r\n        return\r\n      }\r\n      // 向后端请求注销账户\r\n      axiosDecryptWithAESCBC().delete(this.urls.urlDeleteAccount)\r\n        .then(() => {\r\n          // 注销成功的通知\r\n          Notify({\r\n            type: 'success',\r\n            message: '注销成功'\r\n          })\r\n          // 清除本地数据\r\n          this.clearLocalDate()\r\n          // 跳转到首页\r\n          this.$router.replace('/')\r\n        })\r\n        .catch(() => {\r\n          // 账号注销失败的通知\r\n          this.isConnected && this.isLoggedIn && Notify({\r\n            type: 'danger',\r\n            message: '账号注销失败'\r\n          })\r\n        })\r\n        .finally(() => {\r\n          this.isDeletingUserAccount = false\r\n        })\r\n    },\r\n    // 退出登录\r\n    requestToLogout () {\r\n      // 防止多次连续请求\r\n      if (this.isLoggingOut) {\r\n        return\r\n      }\r\n      this.isLoggingOut = true\r\n      // 未成功连接服务器\r\n      if (!this.isConnected) {\r\n        this.notifyBadConnection()\r\n        return\r\n      }\r\n      // 像后端请求退出登录\r\n      axiosDecryptWithAESCBC().get(this.urls.urlGetUserLogout)\r\n        .then(() => {\r\n          // 登出成功的通知\r\n          Notify({\r\n            type: 'success',\r\n            message: '退出登录成功'\r\n          })\r\n          // 清除本地数据\r\n          this.clearLocalDate()\r\n          // 跳转到首页\r\n          this.$router.replace('/')\r\n        })\r\n        .catch(() => {\r\n          // 退出登录失败的通知\r\n          this.isConnected && this.isLoggedIn && Notify({\r\n            type: 'danger',\r\n            message: '退出登录失败'\r\n          })\r\n        })\r\n        .finally(() => {\r\n          this.isLoggingOut = false\r\n        })\r\n    },\r\n    // 上传用户书签信息\r\n    postUserBookmarks () {\r\n      // 自定义标识符\r\n      const aesSecrets = this.$store.state.appAESSecrets\r\n      const bookmarks = this.$store.state.appUserBookmarks\r\n      const formData = new FormData()\r\n      // 用户书签详情\r\n      const detail = bookmarks.map(item => ({\r\n        title: item?.title,\r\n        url: item?.url,\r\n        iconName: item.iconName\r\n      }))\r\n      // 加密的书签详情\r\n      const encDetail = AESCBCEncryptor(aesSecrets.iv, aesSecrets.key, detail)\r\n      // 书签图片文件\r\n      const iconFiles = bookmarks.map(item => item.iconFile)\r\n      // 填充表单数据\r\n      formData.append('detail', encDetail)\r\n      iconFiles.forEach(item => {\r\n        formData.append('icon', item)\r\n      })\r\n      // 上传表单数据\r\n      return new Promise((resolve, reject) =>\r\n        axiosRenewAccessToken().post(this.urls.urlPostUserBookmark, formData)\r\n          .then(() => {\r\n            // 上传成功的通知\r\n            Notify({\r\n              type: 'success',\r\n              duration: 2000,\r\n              message: '书签信息上传成功',\r\n              onClose: () => resolve()\r\n            })\r\n          })\r\n          .catch(error => {\r\n            if (!this.isConnected) return reject(new Error('server disconnected'))\r\n            if (!this.isLoggedIn) return reject(new Error('user is not logged in'))\r\n            // 上传失败的通知\r\n            console.error(error)\r\n            Notify({\r\n              type: 'danger',\r\n              duration: 2000,\r\n              message: '书签信息上传失败',\r\n              onClose: () => resolve()\r\n            })\r\n          }))\r\n    },\r\n    // 上传用户背景信息\r\n    postUserBackground () {\r\n      // 自定义标识符\r\n      const aesSecrets = this.$store.state.appAESSecrets\r\n      const background = this.$store.state.appUserBackground\r\n      const formData = new FormData()\r\n      // 用户背景详情\r\n      const detail = {\r\n        titleColor: background.bmTitleColor,\r\n        imageName: background.bgImgName\r\n      }\r\n      // 加密的背景详情\r\n      const encDetail = AESCBCEncryptor(aesSecrets.iv, aesSecrets.key, detail)\r\n      // 填充表单数据\r\n      formData.append('detail', encDetail)\r\n      background?.bgImgFile && formData.append('image', background.bgImgFile)\r\n      // 上传表单数据\r\n      return new Promise((resolve, reject) =>\r\n        axiosRenewAccessToken().post(this.urls.urlPostUserBackground, formData)\r\n          .then(() => {\r\n            // 上传成功的通知\r\n            Notify({\r\n              type: 'success',\r\n              duration: 2000,\r\n              message: '背景信息上传成功',\r\n              onClose: () => resolve()\r\n            })\r\n          })\r\n          .catch(error => {\r\n            if (!this.isConnected) return reject(new Error('server disconnected'))\r\n            if (!this.isLoggedIn) return reject(new Error('user is not logged in'))\r\n            // 上传失败的通知\r\n            console.error(error)\r\n            Notify({\r\n              type: 'danger',\r\n              duration: 2000,\r\n              message: '背景信息上传失败',\r\n              onClose: () => resolve()\r\n            })\r\n          }))\r\n    },\r\n    // 下载用户书签信息\r\n    async downloadUserBookmarks () {\r\n      // 响应书签信息数组\r\n      const resBms = []\r\n      // 临时书签信息数组\r\n      const bookmarks = []\r\n      // 等待获取用户书签详情\r\n      const tempBms = await new Promise((resolve, reject) =>\r\n        axiosDecryptWithAESCBC().get(this.urls.urlGetUserBookmark)\r\n          .then(response => {\r\n            return resolve(response?.data?.payload)\r\n          })\r\n          .catch(error => {\r\n            if (!this.isConnected) return reject(new Error('server disconnected'))\r\n            if (!this.isLoggedIn) return reject(new Error('user is not logged in'))\r\n            // 下载失败的通知\r\n            console.error(error)\r\n            Notify({\r\n              type: 'danger',\r\n              duration: 2000,\r\n              message: '书签信息下载失败',\r\n              onClose: () => reject(error)\r\n            })\r\n          }))\r\n      resBms.push(...tempBms)\r\n      // 逐个获取书签图标数据\r\n      for (const item of resBms) {\r\n        // 单个书签信息\r\n        const iconURL = `${baseURLImg}${item?.iconPath}`\r\n        const iconName = item?.iconPath?.split('/').pop()\r\n        const iconType = `image/${item?.iconPath?.split('.').pop()}`\r\n        const bookmark = {\r\n          title: item?.title,\r\n          url: item?.url,\r\n          iconName: iconName,\r\n          iconSrc: undefined,\r\n          iconFile: undefined\r\n        }\r\n        // 获取书签图标\r\n        await axiosRenewAccessToken().get(iconURL, {\r\n          responseType: 'blob'\r\n        })\r\n          // 书签信息获取成功后，获取并转换图标文件\r\n          .then(response => new Promise((resolve, reject) => {\r\n            const iconBlob = response?.data\r\n            if (!iconBlob?.size) {\r\n              return reject(new Error(`invalid icon file ${iconName}`))\r\n            }\r\n            const reader = new FileReader()\r\n            // 补全单个书签信息\r\n            reader.addEventListener('load', () => {\r\n              bookmark.iconSrc = reader.result\r\n              bookmark.iconFile = new File([iconBlob], iconName, {\r\n                type: iconType\r\n              })\r\n              return resolve()\r\n            })\r\n            reader.addEventListener('error', () => {\r\n              return reject(new Error(`failed to convert icon file ${iconName}`))\r\n            })\r\n            reader.addEventListener('abort', () => {\r\n              return reject(new Error(`icon file ${iconName} conversion aborted`))\r\n            })\r\n            reader.readAsDataURL(iconBlob)\r\n          }).catch(error => {\r\n            console.error(error)\r\n          }).finally(() => {\r\n            // 填充临时书签信息数组\r\n            bookmarks.push(bookmark)\r\n          }))\r\n          .catch(() => {\r\n            // 书签图标获取失败\r\n            console.log(`failed to access image from ${iconURL}`)\r\n            // 填充临时书签信息数组\r\n            bookmarks.push(bookmark)\r\n          })\r\n      }\r\n      // 保存临时书签信息至本地\r\n      return new Promise((resolve, reject) =>\r\n        this.$store.dispatch('saveAppUserBookmarks', bookmarks)\r\n          .then(() => {\r\n            Notify({\r\n              type: 'success',\r\n              duration: 2000,\r\n              message: '书签信息更新完成',\r\n              onClose: () => resolve()\r\n            })\r\n          })\r\n          .catch(error => {\r\n            Notify({\r\n              type: 'danger',\r\n              duration: 2000,\r\n              message: '书签信息更新失败',\r\n              onClose: () => reject(error)\r\n            })\r\n          }))\r\n    },\r\n    // 下载用户背景信息\r\n    async downloadUserBackground () {\r\n      // 等待获取用户背景详情\r\n      const resBg = await new Promise((resolve, reject) =>\r\n        axiosDecryptWithAESCBC().get(this.urls.urlGetUserBackground)\r\n          .then(response => {\r\n            return resolve(response?.data?.payload)\r\n          })\r\n          .catch(error => {\r\n            if (!this.isConnected) return reject(new Error('server disconnected'))\r\n            if (!this.isLoggedIn) return reject(new Error('user is not logged in'))\r\n            // 下载失败的通知\r\n            Notify({\r\n              type: 'danger',\r\n              duration: 2000,\r\n              message: '背景信息下载失败',\r\n              onClose: () => reject(error)\r\n            })\r\n          }))\r\n      // 自定义标识符\r\n      const imgURL = `${baseURLImg}${resBg?.imagePath}`\r\n      const imgName = resBg?.imagePath.split('/').pop()\r\n      const imgType = `image/${resBg?.imagePath.split('.').pop()}`\r\n      // 获取背景图片数据\r\n      const imgData = await new Promise((resolve, reject) =>\r\n        axiosRenewAccessToken().get(imgURL, {\r\n          responseType: 'blob'\r\n        }).then(response => {\r\n          const imgBlob = response?.data\r\n          if (!imgBlob?.size) {\r\n            return reject(new Error(`invalid image file ${imgName}`))\r\n          }\r\n          const reader = new FileReader()\r\n          reader.addEventListener('load', () => {\r\n            const tempImgData = {\r\n              bgImgDataURL: reader.result,\r\n              bgImgFile: new File([imgBlob], imgName, {\r\n                type: imgType\r\n              })\r\n            }\r\n            return resolve(tempImgData)\r\n          })\r\n          reader.addEventListener('error', () => {\r\n            return reject(new Error(`failed to convert image file ${imgName}`))\r\n          })\r\n          reader.addEventListener('abort', () => {\r\n            return reject(new Error(`image file ${imgName} conversion aborted`))\r\n          })\r\n          reader.readAsDataURL(imgBlob)\r\n        }).catch(() => {\r\n          if (!this.isConnected) return reject(new Error('server disconnected'))\r\n          if (!this.isLoggedIn) return reject(new Error('user is not logged in'))\r\n          // 下载失败的通知\r\n          console.log(`failed to access image from ${imgURL}`)\r\n          Notify({\r\n            type: 'danger',\r\n            duration: 2000,\r\n            message: '背景信息下载失败',\r\n            onClose: () => resolve({\r\n              bgImgDataURL: undefined,\r\n              bgImgFile: undefined\r\n            })\r\n          })\r\n        }))\r\n        .catch(error => {\r\n          console.error(error)\r\n        })\r\n      // 完整背景信息\r\n      const bgInfo = {\r\n        bmTitleColor: resBg?.titleColor,\r\n        bgImgName: imgName,\r\n        bgImgFile: imgData?.bgImgFile,\r\n        bgImgDataURL: imgData?.bgImgDataURL\r\n      }\r\n      // 保存临时背景信息至本地\r\n      return new Promise((resolve, reject) =>\r\n        this.$store.dispatch('saveAppUserBackground', bgInfo)\r\n          .then(() => {\r\n            Notify({\r\n              type: 'success',\r\n              duration: 2000,\r\n              message: '背景信息更新完成',\r\n              onClose: () => resolve()\r\n            })\r\n          })\r\n          .catch(error => {\r\n            Notify({\r\n              type: 'danger',\r\n              duration: 2000,\r\n              message: '背景信息更新失败',\r\n              onClose: () => reject(error)\r\n            })\r\n          }))\r\n    },\r\n    // 上传用户数据\r\n    async uploadUserData () {\r\n      // 防止多次连续请求\r\n      if (this.isUploadingUserData) {\r\n        this.notifyRequestFrequencyHigh()\r\n        return\r\n      }\r\n      this.isUploadingUserData = true\r\n      try {\r\n        // 上传用户书签信息\r\n        await this.postUserBookmarks()\r\n        // 上传用户背景信息\r\n        await this.postUserBackground()\r\n      } finally {\r\n        // 10秒后解除请求限制\r\n        setTimeout(() => {\r\n          this.isUploadingUserData = false\r\n        }, 10000)\r\n      }\r\n    },\r\n    // 下载用户数据\r\n    async downloadUserData () {\r\n      // 防止多次连续请求\r\n      if (this.isDownloadingUserData) {\r\n        this.notifyRequestFrequencyHigh()\r\n        return\r\n      }\r\n      this.isDownloadingUserData = true\r\n      try {\r\n        // 下载用户书签信息\r\n        await this.downloadUserBookmarks()\r\n        // 下载用户背景信息\r\n        await this.downloadUserBackground()\r\n      } finally {\r\n        // 10秒后解除请求限制\r\n        setTimeout(() => {\r\n          this.isDownloadingUserData = false\r\n        }, 10000)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageSettings.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageSettings.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PageSettings.vue?vue&type=template&id=29e6b9dd&scoped=true&\"\nimport script from \"./PageSettings.vue?vue&type=script&lang=js&\"\nexport * from \"./PageSettings.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PageSettings.vue?vue&type=style&index=0&id=29e6b9dd&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"29e6b9dd\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar forEach = require('../internals/array-for-each');\n\n// `Array.prototype.forEach` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\n$({ target: 'Array', proto: true, forced: [].forEach != forEach }, {\n  forEach: forEach\n});\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageSettingsPassword.vue?vue&type=style&index=0&id=44a32f3b&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageSettingsPassword.vue?vue&type=style&index=0&id=44a32f3b&scoped=true&lang=css&\"","import '../../style/base.css';\nimport '../../overlay/index.css';\nimport '../../info/index.css';\nimport '../../icon/index.css';\nimport '../index.css';","import CryptoJS from 'crypto-js'\r\n\r\n// 使用SHA256的散列值计算器\r\nfunction SHA256Calculator (message) {\r\n  if (typeof message !== 'string') {\r\n    message = JSON.stringify(message)\r\n  }\r\n  const hashDigest = CryptoJS.SHA256(message)\r\n  const hashDigestBase64 = CryptoJS.enc.Base64.stringify(hashDigest)\r\n  return hashDigestBase64\r\n}\r\n\r\nexport {\r\n  SHA256Calculator\r\n}\r\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageSettings.vue?vue&type=style&index=0&id=29e6b9dd&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageSettings.vue?vue&type=style&index=0&id=29e6b9dd&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageSettingsNickname.vue?vue&type=style&index=0&id=a0e5af74&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageSettingsNickname.vue?vue&type=style&index=0&id=a0e5af74&scoped=true&lang=css&\"","module.exports = __webpack_public_path__ + \"img/default_avatar.db6e1d54.png\";","import '../../style/base.css';\nimport '../../overlay/index.css';\nimport '../../info/index.css';\nimport '../../icon/index.css';\nimport '../../popup/index.css';\nimport '../../loading/index.css';\nimport '../../button/index.css';\nimport '../index.css';"],"sourceRoot":""}