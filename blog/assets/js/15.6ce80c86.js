(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{478:function(t,a,s){"use strict";s.r(a);var e=s(2),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("img",{attrs:{src:t.$themeConfig.imageAPI,alt:"墨天逸——随机二次元图片api接口（http://www.motianyi.cn/）"}}),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",[t._v("参考文章：")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://blog.csdn.net/u013778905/article/details/78073566",target:"_blank",rel:"noopener noreferrer"}},[t._v("移动Web开发基础-Viewport"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://blog.csdn.net/u013778905/article/details/78343806",target:"_blank",rel:"noopener noreferrer"}},[t._v("移动Web开发基础-百分比+flex布局方案"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://blog.csdn.net/u013778905/article/details/78534287",target:"_blank",rel:"noopener noreferrer"}},[t._v("移动Web开发基础-rem布局"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://blog.csdn.net/u013778905/article/details/78729468",target:"_blank",rel:"noopener noreferrer"}},[t._v("移动Web开发基础-利用VW单位适配布局"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.w3cplus.com/mobile/lib-flexible-for-html5-layout.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用Flexible实现手淘H5页面的终端适配"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.w3cplus.com/css/vw-for-layout.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("再聊移动端页面的适配"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.w3cplus.com/mobile/vw-layout-in-vue.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("如何在Vue项目中使用vw实现移动端适配"),s("OutboundLink")],1)])])]),t._v(" "),s("h2",{attrs:{id:"_1-移动端适配的难点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-移动端适配的难点"}},[t._v("#")]),t._v(" 1. 移动端适配的难点")]),t._v(" "),s("ol",[s("li",[t._v("设备像素比dpr不一致；")]),t._v(" "),s("li",[t._v("webview版本较老，不支持新特性。")]),t._v(" "),s("li",[t._v("想要在不同dpr的屏幕下，区块/文字/边框等视觉效果相同。")])]),t._v(" "),s("p",[t._v("说人话就是，难点是跟随产品经理的需求自己跑来的，即产品经理想让同一网页在不同缩放比率的屏幕上显示相同的效果。")]),t._v(" "),s("p",[t._v("例如："),s("code",[t._v("<div>")]),t._v("块的宽度，在不同屏幕的百分比相同；文字和边框，在不同屏幕下肉眼看起来都是16px和1px（在dpr=2的情况下，实际是32px和2px）。")]),t._v(" "),s("h2",{attrs:{id:"_2-理想的适配方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-理想的适配方案"}},[t._v("#")]),t._v(" 2. 理想的适配方案")]),t._v(" "),s("p",[t._v("也就是利用"),s("code",[t._v("vw")]),t._v("单位适配：")]),t._v(" "),s("ol",[s("li",[t._v("在html文件内的"),s("code",[t._v("<head>")]),t._v("内添加"),s("code",[t._v('<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">')]),t._v("；")]),t._v(" "),s("li",[t._v("对html文件内的"),s("code",[t._v("<body>")]),t._v("内的元素的长度和间距等属性使用"),s("code",[t._v("VW")]),t._v("作为单位；")]),t._v(" "),s("li",[t._v("对html文件内的文字的大小和元素的边框宽度等属性使用"),s("code",[t._v("px")]),t._v("作为单位。")])]),t._v(" "),s("p",[t._v("如下例所示：")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token doctype"}},[t._v("<!DOCTYPE html>")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("en"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("charset")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("UTF-8"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("viewport"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("width=device-width, initial-scale=1.0, user-scalable=no"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Document"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token style"}},[s("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n        "),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("#block")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("max-width")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 500px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 50vw"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("height")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 50vw"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-size")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 14px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" white"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("background-color")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rgba")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" .8"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("border")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 2px solid red "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    ")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("block"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        Destroy All Humans!\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("这样，因为"),s("code",[t._v('<meta name="viewport">')]),t._v("，使页面所有元素（包含文字）可以被用户通过手势全局缩放；又因为"),s("code",[t._v('content="width=device-width, initial-scale=1.0"')]),t._v("，使页面的文字能被浏览器自动放大为物理的42px、肉眼的14px，而我们则不用单独编写js脚本进行控制了。")]),t._v(" "),s("p",[t._v("幸运的是，现代浏览器大都已经实现了这些特性。对于一些兼容问题，可以通过配合使用"),s("code",[t._v("less")]),t._v("/"),s("code",[t._v("sass")]),t._v("/"),s("code",[t._v("webpack")]),t._v("等相关工具进行解决。")]),t._v(" "),s("h2",{attrs:{id:"_3-关于lib-flexible适配方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-关于lib-flexible适配方案"}},[t._v("#")]),t._v(" 3. 关于"),s("code",[t._v("lib-flexible")]),t._v("适配方案")]),t._v(" "),s("p",[t._v("库的地址："),s("a",{attrs:{href:"https://github.com/amfe/lib-flexible",target:"_blank",rel:"noopener noreferrer"}},[t._v("amfe/lib-flexible: 可伸缩布局方案"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("官方很久以前就做了说明：")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",[t._v("由于"),s("code",[t._v("viewport")]),t._v("单位得到众多浏览器的兼容，"),s("code",[t._v("lib-flexible")]),t._v("这个过渡方案已经可以放弃使用，不管是现在的版本还是以前的版本，都存有一定的问题。建议大家开始使用"),s("code",[t._v("viewport")]),t._v("来替代此方案。"),s("code",[t._v("vw")]),t._v("的兼容方案可以参阅《"),s("a",{attrs:{href:"https://www.w3cplus.com/mobile/vw-layout-in-vue.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("如何在Vue项目中使用vw实现移动端适配"),s("OutboundLink")],1),t._v("》一文。")])]),t._v(" "),s("p",[t._v("虽然我们不应在实际项目中使用"),s("code",[t._v("lib-flexible")]),t._v("这个方案，但是了解一下该方案的原理还是有必要的：")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("在n年以前，vw/vh等viewport的单位存在兼容问题，于是淘宝工程师想到了用rem单位模拟"),s("code",[t._v("vw")]),t._v("单位；")])]),t._v(" "),s("li",[s("p",[t._v("假设可视窗口宽度为375px,设计稿宽度为750px，设计稿内某div元素宽度240px，dpr为1，如果使用vw作为单位：")]),t._v(" "),s("ul",[s("li",[t._v("(1) 100vw === 375px；")]),t._v(" "),s("li",[t._v("(2) 240px/750px = x/100vw，获得x=32vw；")]),t._v(" "),s("li",[t._v("(3) 即在375px的视口中，该元素宽度占比32%（即120px）；")])])]),t._v(" "),s("li",[s("p",[t._v("现在要用rem模拟vw，先设定100rem === 100vw：")]),t._v(" "),s("ul",[s("li",[t._v("(1) 那么 100rem === 375px;")]),t._v(" "),s("li",[t._v("(2) 1rem === 1vw === 3.75px;")]),t._v(" "),s("li",[t._v("(3) 所以应该有"),s("code",[t._v('<html style="font-size: 3.75px;">')]),t._v("；")]),t._v(" "),s("li",[t._v("(4) 上面提到的div元素，用rem表示为 32rem；")])])]),t._v(" "),s("li",[s("p",[t._v("但是浏览器支持的font-size最小为12px或10px，于是更改设定为 10rem === 100vw：")]),t._v(" "),s("ul",[s("li",[t._v("(1) 1rem === 10vw === 37.5px;")]),t._v(" "),s("li",[t._v("(2) 于是"),s("code",[t._v('<html style="font-size: 37.5px;">')])]),t._v(" "),s("li",[t._v("(3) 然后那个div宽度，用rem表示就应该为 3.2rem（32vw === 3.2rem）；")])])]),t._v(" "),s("li",[s("p",[t._v("如果屏幕为高分辨率，假设dpr=3，就要修改"),s("code",[t._v('<meta name="viewport" content="...">')]),t._v("进行缩放了：")]),t._v(" "),s("ul",[s("li",[t._v("(1) 视口为375px，那么在这375px的狭小宽度内，实际显示的宽度是 375px * 3 = 1125px；")]),t._v(" "),s("li",[t._v("(2) 对实际宽度进行缩小，缩小率 scale = 1/dpr（即1/3， 0.333333）；那么设定"),s("code",[t._v('<meta name="viewport" content="initial-scale=0.333333">')])]),t._v(" "),s("li",[t._v("(3) 10rem === 100vw === 1125px;所以 1rem === 112.5px;")]),t._v(" "),s("li",[t._v("(4) 于是"),s("code",[t._v('<html style="font-size: 112.5px;">')])]),t._v(" "),s("li",[t._v("(5) 然后那个占比32%的div，在1125px中实际宽度为 112.5px * 3.2rem = 360px（也就是 1125px * 0.32 = 360px）；")])])]),t._v(" "),s("li",[s("p",[t._v("由以上我们知道，用rem模拟vw：")]),t._v(" "),s("ul",[s("li",[t._v("(1) 根元素html的font-size（也就是1rem）应该动态计算；10rem === 100vw === 视口宽度 * dpr；")]),t._v(" "),s("li",[t._v("(2) 设定"),s("code",[t._v('<meta name="viewport" content="initial-scale=缩放率">')]),t._v("；缩放率 scale = 1/dpr;")]),t._v(" "),s("li",[t._v("(3) 设计稿无论是640px、是750px还是任意宽度，只要得到目标元素在稿内的宽度占比即可；若占比25%，即为25vw，那么 width/10rem = 25vw/100vw，求得写css中的 width: 2.5rem;")])])]),t._v(" "),s("li",[s("p",[t._v("注意事项：")]),t._v(" "),s("ul",[s("li",[t._v("(1) 文字的话，不应该用rem作为单位，应仍然使用px（原因是防止出现类似 13.2333px 这种奇葩的字体大小）；")]),t._v(" "),s("li",[t._v("(2) 由于动态设定了根元素html的font-size，所以会改变整个页面的字体的默认大小，甚至可能是几百px；")]),t._v(" "),s("li",[t._v("(3) 为了消除影响，于是动态设定 body 元素的默认 font-size 为 (12 * dpr)px;")]),t._v(" "),s("li",[t._v("(4) 其中乘以 dpr 是为了在不同分辨率的屏幕下，消除 meta scale 缩放的影响，使文字在不同分辨率下肉眼可见的大小一致。")])])])]),t._v(" "),s("h2",{attrs:{id:"其它"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其它"}},[t._v("#")]),t._v(" 其它🍜")]),t._v(" "),s("p",[t._v("遇到或想到相关内容后再做补充……")])])}),[],!1,null,null,null);a.default=n.exports}}]);