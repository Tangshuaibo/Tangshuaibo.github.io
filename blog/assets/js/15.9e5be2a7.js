(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{505:function(t,e,a){"use strict";a.r(e);var r=a(4),s=Object(r.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("img",{attrs:{src:t.$page.randImgAPI,alt:t.$page.randImgAlt}}),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[t._v("以下内容以在云服务器部署"),a("code",[t._v("golang")]),t._v("服务器为例")])]),t._v(" "),a("h2",{attrs:{id:"_1-docker软件本身安装慢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-docker软件本身安装慢"}},[t._v("#")]),t._v(" 1. docker软件本身安装慢")]),t._v(" "),a("p",[t._v("直接根据docker官网提供的linux端安装教程内的软件（非镜像源）地址，下载缓慢且易断；切换至国内docker软件源下载，发现也不稳定；最终决定使用"),a("code",[t._v("snap")]),t._v("提供的docker包☺️。")]),t._v(" "),a("h2",{attrs:{id:"_2-运行golang服务器-找不到某些文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-运行golang服务器-找不到某些文件"}},[t._v("#")]),t._v(" 2. 运行golang服务器，找不到某些文件")]),t._v(" "),a("p",[t._v("原因是linux环境与windows环境下文件的换行符不同，从window下复制到linux中的文件，可能无法正常读取。使用"),a("code",[t._v("dos2unix")]),t._v("工具，或使用"),a("code",[t._v("vim")]),t._v("的"),a("code",[t._v(":set ff=unix")]),t._v("命令，以转换相关文件格式。")]),t._v(" "),a("h2",{attrs:{id:"_3-打包golang服务器镜像-docker镜像的选择"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-打包golang服务器镜像-docker镜像的选择"}},[t._v("#")]),t._v(" 3. 打包golang服务器镜像，docker镜像的选择")]),t._v(" "),a("p",[t._v("使用"),a("code",[t._v("alpine")]),t._v("作为基础镜像，那么最好在"),a("code",[t._v("golang:alpine")]),t._v("镜像环境下，将golang源码编译为可执行文件。")]),t._v(" "),a("h2",{attrs:{id:"_4-等待基础服务完全启动后-再启动golang服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-等待基础服务完全启动后-再启动golang服务器"}},[t._v("#")]),t._v(" 4. 等待基础服务完全启动后，再启动golang服务器")]),t._v(" "),a("p",[t._v("使用"),a("code",[t._v("wait-for-it")]),t._v("等脚本工具")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[t._v("参考教程：")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://docs.docker.com/compose/startup-order/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Control startup and shutdown order in Compose"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/vishnubob/wait-for-it",target:"_blank",rel:"noopener noreferrer"}},[t._v("vishnubob/wait-for-it"),a("OutboundLink")],1)])])]),t._v(" "),a("h2",{attrs:{id:"_5-使用let-s-encrypt启动服务器-缺失证书-缺失域名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-使用let-s-encrypt启动服务器-缺失证书-缺失域名"}},[t._v("#")]),t._v(" 5. 使用let's encrypt启动服务器，缺失证书/缺失域名")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("missing certificates")]),t._v("：使用let's encrypt启用HTTPS，必须打开80端口，才可获取免费证书。")]),t._v(" "),a("li",[a("code",[t._v("missing server name")]),t._v("：使用子域名解析，必须在云服务器的域名解析中添加相关记录。")])]),t._v(" "),a("h2",{attrs:{id:"_6-指定ip的用户无法访问mysql容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-指定ip的用户无法访问mysql容器"}},[t._v("#")]),t._v(" 6. 指定ip的用户无法访问MySQL容器")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("username@container_name")]),t._v("：由于命令"),a("code",[t._v("mysql -u username@container_name -p")]),t._v("只是读取字符串，无法做到局域网dns解析。")]),t._v(" "),a("li",[a("code",[t._v("username@specified_ip")]),t._v("：由于docker服务重启后，各容器分配的ip地址可能变动，故老实使用通配符（"),a("code",[t._v('username@"%"')]),t._v("）。")])]),t._v(" "),a("h2",{attrs:{id:"其它"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其它"}},[t._v("#")]),t._v(" 其它🍜")]),t._v(" "),a("p",[t._v("想到或遇到再做补充……")])])}),[],!1,null,null,null);e.default=s.exports}}]);