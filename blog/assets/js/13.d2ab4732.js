(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{504:function(s,t,a){"use strict";a.r(t);var e=a(4),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("img",{attrs:{src:s.$page.randImgAPI,alt:s.$page.randImgAlt}}),s._v(" "),a("h2",{attrs:{id:"_1-vuepress的全局安装与局部安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-vuepress的全局安装与局部安装"}},[s._v("#")]),s._v(" 1. VuePress的全局安装与局部安装")]),s._v(" "),a("p",[s._v("如果一起使用vuepress与vuepress-theme-reco，那么它们的安装位置必须相同。否则，vuepress可能会找不到vuepress-theme-reco中使用的插件，进而报错。")]),s._v(" "),a("h2",{attrs:{id:"_2-vuepress的路径要求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-vuepress的路径要求"}},[s._v("#")]),s._v(" 2. VuePress的路径要求")]),s._v(" "),a("p",[s._v("vuepress的安装路径不能有特殊符号。例如：路径内有符号"),a("code",[s._v("&")]),s._v("，那么使用npm安装vuepress时会提示部分模块无法安装；路径内有符号"),a("code",[s._v("{")]),s._v("，那么vuepress使用webpack打包时会无法复制静态文件至目标路径，但是没有错误信息。")]),s._v(" "),a("h2",{attrs:{id:"_3-markdown文件内的路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-markdown文件内的路径"}},[s._v("#")]),s._v(" 3. Markdown文件内的路径")]),s._v(" "),a("h3",{attrs:{id:"相对路径与绝对路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#相对路径与绝对路径"}},[s._v("#")]),s._v(" 相对路径与绝对路径")]),s._v(" "),a("p",[s._v("我们在这里以引入图片文件至markdown文件做说明。")]),s._v(" "),a("p",[s._v("要在当前markdown文件内显示图片，图片路径可以是相对于目录"),a("code",[s._v("public/")]),s._v("的静态资源路径，如"),a("code",[s._v("/img.png")]),s._v("，也可以是相对于当前目录的路径，如"),a("code",[s._v("./img.png")]),s._v("。值得注意的是，打包后有markdown文件得到的html文件内的图片路径是相对于网站根目录"),a("code",[s._v("/")]),s._v("的绝对路径。")]),s._v(" "),a("p",[s._v("如果我们如果修改了"),a("code",[s._v("config.js")]),s._v("内的配置项"),a("code",[s._v("base")]),s._v("为"),a("code",[s._v("/blog/")]),s._v("，同时还想在markdown文件内使用图片的绝对路径，那么需要把"),a("code",[s._v("/img.png")]),s._v("修改为"),a("code",[s._v("/blog/img.png")]),s._v("。当然，我们也可以用"),a("code",[s._v('<img :src="$withBase(\'/img.png\')" alt="img.png">')]),s._v("来代替"),a("code",[s._v("![img.png](/blog/img.png)")]),s._v("。")]),s._v(" "),a("p",[s._v("如果我们只想在markdown文件内使用图片的相对路径，那么就与是否修改了"),a("code",[s._v("config.js")]),s._v("内的"),a("code",[s._v("base")]),s._v("配置项无关。为了保持工程目录的干净，我们最好在markdown文件所在的文件夹内建立同级的"),a("code",[s._v("img")]),s._v("文件夹，用以提供可用相对路径找到的资源文件。例如，在内容有"),a("code",[s._v("![img.png](./img/test.png)")]),s._v("的markdown文件的所在目录下，建立"),a("code",[s._v("img/")]),s._v("文件夹，用以存放"),a("code",[s._v("test.png")]),s._v("。")]),s._v(" "),a("p",[s._v("另外需要注意的是，路径字符串内不能含有中文，如：各级文件夹、图片的名称等，否则vuepress会运行出错。")]),s._v(" "),a("h3",{attrs:{id:"配置webpack使用别名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置webpack使用别名"}},[s._v("#")]),s._v(" 配置Webpack使用别名")]),s._v(" "),a("p",[s._v("如果要在markdown文件中引用"),a("code",[s._v(".vuepress/public")]),s._v("中的图片"),a("code",[s._v("img.png")]),s._v("，除了可以写为"),a("code",[s._v('<img :src="$withBase(\'/img.png\')" alt="img.png">')]),s._v("，还可以写成"),a("code",[s._v("![img.png](~@public/img.png)")]),s._v("。")]),s._v(" "),a("p",[s._v("只需要按照如下方式修改"),a("code",[s._v(".vuepress/config.js")]),s._v("：")]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",[s._v("最好不要使用配置别名的方式引入"),a("code",[s._v(".vuepress/public")]),s._v("中的资源，因为打包后"),a("code",[s._v("public")]),s._v("中的静态资源会被简单的复制，同时又被webpack复制并处理了一次，于是打包的最终文件中会有冗余的静态资源。建议新建文件夹"),a("code",[s._v(".vuepress/assets")]),s._v("用于存放静态资源，并对该路径配置别名"),a("code",[s._v("@assets")]),s._v("。")])]),s._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\n    configureWebpack"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        resolve"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            alias"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@public'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./public'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("ol",[a("li",[s._v("上述代码中的变量"),a("code",[s._v("__dirname")]),s._v("表示的是配置文件"),a("code",[s._v("config.js")]),s._v("所在目录"),a("code",[s._v(".vuepress")]),s._v("在系统中的绝对路径；")]),s._v(" "),a("li",[s._v("不同于VueCLI默认设置了一个指向"),a("code",[s._v("<projectRoot>/src")]),s._v("的别名"),a("code",[s._v("@")]),s._v("，VuePress并没有默认设置指向"),a("code",[s._v(".vuepress")]),s._v("的别名。")])])]),s._v(" "),a("h2",{attrs:{id:"_4-stylus文件内的路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-stylus文件内的路径"}},[s._v("#")]),s._v(" 4. Stylus文件内的路径")]),s._v(" "),a("p",[s._v("博客部署路径"),a("code",[s._v("base")]),s._v("为默认值"),a("code",[s._v("/")]),s._v("时，样式文件内的图片路径可以使用"),a("code",[s._v("/")]),s._v("或"),a("code",[s._v("./")]),s._v("，如下例：")]),s._v(" "),a("div",{staticClass:"language-css extra-class"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[s._v(".sidebar")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("background-image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token url"}},[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("./sidebar_background.png"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("当"),a("code",[s._v("base")]),s._v("被修改后，如果我们想在样式文件内使用相对于"),a("code",[s._v("base")]),s._v("（如"),a("code",[s._v("/blog/")]),s._v("）的相对路径，那么必须配合使用webpack的配置项"),a("code",[s._v("alias")]),s._v("。")]),s._v(" "),a("p",[s._v("例如，开发环境下的图片文件放在文件夹"),a("code",[s._v(".vuepress/assets")]),s._v("内，那么按照如下方式修改"),a("code",[s._v(".vuepress/config.js")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\n    configureWebpack"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        resolve"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            alias"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@assets'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./assets'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("接着在"),a("code",[s._v(".vuepress/styles/index.styl")]),s._v("文件内添加如下代码：")]),s._v(" "),a("div",{staticClass:"language-css extra-class"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[s._v(".sidebar")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("background-image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token url"}},[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string url"}},[s._v("'~@assets/sidebar_background.png'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("最后webpack就会在打包时将"),a("code",[s._v("~@assets")]),s._v("替换为相应的路径字符串。")]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",[s._v("一定要用引号包围路径字符串，如："),a("code",[s._v("url('~@assets/sidebar_background.png')")]),s._v("，否则webpack会找不到模块。")])]),s._v(" "),a("h2",{attrs:{id:"_5-vuepress主题继承"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-vuepress主题继承"}},[s._v("#")]),s._v(" 5. VuePress主题继承")]),s._v(" "),a("p",[s._v("不仅要在"),a("code",[s._v(".vuepress/theme/index.js")]),s._v("文件内修改"),a("code",[s._v("extend")]),s._v("属性，还要在"),a("code",[s._v(".vuepress/config.js")]),s._v("文件内修改"),a("code",[s._v("theme")]),s._v("属性。")]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",[s._v("对主题"),a("code",[s._v("vuepress-theme-reco")]),s._v("的继承可能存在某些"),a("a",{attrs:{href:"https://github.com/vuepress-reco/vuepress-theme-reco/issues/203",target:"_blank",rel:"noopener noreferrer"}},[s._v("问题"),a("OutboundLink")],1),s._v("……")])]),s._v(" "),a("h2",{attrs:{id:"其它"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其它"}},[s._v("#")]),s._v(" 其它")]),s._v(" "),a("p",[s._v("使用vuepress搭建博客的遇到的大小问题多如牛毛，以上几个问题只是最令我不舒服的部分。我会持续记录下来，使用vuepress时遇到的较为严重的问题。")])])}),[],!1,null,null,null);t.default=n.exports}}]);